<!DOCTYPE html>
<html>
<head>
<title>Poems — AlixGHF</title>
<link rel="stylesheet" href="style.css">

<style>
/* ---------- GENERAL ---------- */
.collapsible {
  cursor: pointer;
  margin: 20px 0 10px;
  font-weight: 400;
  font-size: 1.3em;
}
.collapsible::after { content: " ▼"; }
.collapsible.collapsed::after { content: " ▶"; }

.poem-list.collapsed { display: none; }

/* ---------- SEARCH + FILTER BAR ---------- */
.search-and-filters {
  position: absolute;
  top: 110px;
  right: 40px;
  display: flex;
  gap: 10px;
  z-index: 1000;
}

.search-bar {
  padding: 6px 10px;
  border: 1px solid #ccc;
  font-size: 0.9em;
}

/* ---------- FILTER DROPDOWN ---------- */
.filter-wrapper {
  position: relative;
}

.filter-button {
  padding: 6px 12px;
  border: 1px solid #ccc;
  background: white;
  cursor: pointer;
}

/* Main dropdown */
.filter-menu {
  position: absolute;
  top: 36px;
  right: 0;
  background: #fafafa;
  border: 1px solid #ddd;
  width: 220px;
  display: none;
}

.filter-wrapper.open .filter-menu {
  display: block;
}

/* Menu items */
.filter-item {
  padding: 8px 12px;
  cursor: pointer;
  position: relative;
  font-size: 0.9em;
}

.filter-item:hover {
  background: #eee;
}

/* ---------- SUBMENUS ---------- */
.submenu {
  position: absolute;
  top: 0;
  left: 100%;
  background: #fff;
  border: 1px solid #ddd;
  min-width: 200px;
  display: none;
}

.filter-item:hover .submenu {
  display: block;
}

/* Submenu options */
.submenu div,
.submenu label {
  padding: 8px 10px;
  display: block;
  cursor: pointer;
  font-size: 0.85em;
}

.submenu div:hover,
.submenu label:hover {
  background: #f0f0f0;
}

/* ---------- THEMES GRID ---------- */
.theme-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 6px 10px;
  padding: 10px;
}

/* ---------- POEMS ---------- */
.poem-list ul {
  margin-left: 20px;
}
</style>
</head>

<body>

<header>
  <h1>Poetry Archive</h1>
</header>

<main>

<!-- SEARCH + FILTER -->
<div class="search-and-filters">
  <input id="searchFilter" class="search-bar" placeholder="Search poems…">

  <div class="filter-wrapper">
    <button class="filter-button">Filters ▾</button>

    <div class="filter-menu">

      <!-- SORT -->
      <div class="filter-item">
        Sort
        <div class="submenu">
          <div data-sort="author">Author’s Choice</div>

          <div>
            Alphabetical
            <div class="submenu">
              <div data-sort="alpha-asc">A → Z</div>
              <div data-sort="alpha-desc">Z → A</div>
            </div>
          </div>

          <div>
            Date
            <div class="submenu">
              <div data-sort="date-desc">Newest → Oldest</div>
              <div data-sort="date-asc">Oldest → Newest</div>
            </div>
          </div>
        </div>
      </div>

      <!-- VOICE -->
      <div class="filter-item">
        Voice
        <div class="submenu">
          <div data-voice="all">All</div>
          <div data-voice="personal">Personal</div>
          <div data-voice="persona">Persona</div>
        </div>
      </div>

      <!-- THEMES -->
      <div class="filter-item">
        Themes
        <div class="submenu">
          <div class="theme-grid">
            <label><input type="checkbox" value="grief"> Grief</label>
            <label><input type="checkbox" value="loss"> Loss</label>
            <label><input type="checkbox" value="love"> Love</label>
            <label><input type="checkbox" value="memory"> Memory</label>
            <label><input type="checkbox" value="nostalgia"> Nostalgia</label>
            <label><input type="checkbox" value="heartbreak"> Heartbreak</label>
            <label><input type="checkbox" value="longing"> Longing</label>
          </div>
        </div>
      </div>

    </div>
  </div>
</div>

<!-- POEMS -->
<section class="poem-section">
  <h2 class="collapsible">Poems</h2>
  <div class="poem-list">
    <ul>
      <li data-theme="grief loss" data-date="2022-06-16" data-voice="personal">
        Untitled — 16/06/2022
      </li>
      <li data-theme="love nostalgia" data-date="2025-07-15" data-voice="personal">
        Ghost — 15/07/2025
      </li>
    </ul>
  </div>
</section>

</main>

<script>
document.addEventListener("DOMContentLoaded", () => {

  const wrapper = document.querySelector(".filter-wrapper");
  const search = document.getElementById("searchFilter");
  const poems = document.querySelectorAll(".poem-list li");
  let sortMode = "author";
  let voiceMode = "all";

  document.querySelector(".filter-button").onclick = () =>
    wrapper.classList.toggle("open");

  document.querySelectorAll("[data-sort]").forEach(el =>
    el.onclick = () => { sortMode = el.dataset.sort; apply(); });

  document.querySelectorAll("[data-voice]").forEach(el =>
    el.onclick = () => { voiceMode = el.dataset.voice; apply(); });

  function apply() {
    let visible = [...poems];

    visible.forEach(li => {
      let show = true;
      if (voiceMode !== "all" && li.dataset.voice !== voiceMode) show = false;
      if (search.value && !li.textContent.toLowerCase().includes(search.value.toLowerCase())) show = false;
      li.style.display = show ? "" : "none";
    });

    visible = visible.filter(li => li.style.display !== "none");

    if (sortMode === "alpha-asc") visible.sort((a,b)=>a.textContent.localeCompare(b.textContent));
    if (sortMode === "alpha-desc") visible.sort((a,b)=>b.textContent.localeCompare(a.textContent));
    if (sortMode === "date-asc") visible.sort((a,b)=>new Date(a.dataset.date)-new Date(b.dataset.date));
    if (sortMode === "date-desc") visible.sort((a,b)=>new Date(b.dataset.date)-new Date(a.dataset.date));

    visible.forEach(li => li.parentElement.appendChild(li));
  }

  search.oninput = apply;
});
</script>

</body>
</html>
