<!DOCTYPE html>
<html>
<head>
<title>Poems — AlixGHF</title>
<link rel="stylesheet" href="style.css">

<style>
/* ---------------- COLLAPSIBLE SECTIONS ---------------- */
.collapsible {
  cursor: pointer;
  user-select: none;
  margin: 20px 0 10px;
  padding: 5px 0;
  font-weight: 400;
  font-size: 1.3em;
  color: #222;
}
.poem-list {
  margin-left: 20px;
}
.poem-list.collapsed {
  display: none;
}
.collapsible::after { content: " ▼"; font-size: 0.9em; }
.collapsible.collapsed::after { content: " ▶"; }

/* ---------------- SEARCH + FILTER BAR ---------------- */
.search-and-filters {
  position: absolute;
  top: 110px;
  right: 40px;
  display: flex;
  align-items: center;
  gap: 12px;
  z-index: 1000;
}

.search-box {
  display: flex;
  gap: 6px;
}

.search-bar {
  padding: 8px 10px;
  font-family: inherit;
  font-size: 0.9em;
  border: 1px solid #d4d4d4;
  width: 180px;
  border-radius: 8px;
  background: #fff;
}

#searchButton {
  padding: 8px 12px;
  border-radius: 8px;
  border: 1px solid #d4d4d4;
  background: #f3f3f3;
  cursor: pointer;
}

/* ---------------- FILTER CONTROLS ---------------- */
.filter-panel {
  position: relative;
  display: flex;
  gap: 6px;
}

.filter-toggle {
  padding: 8px 14px;
  font-family: inherit;
  font-size: 0.9em;
  border-radius: 999px;
  border: 1px solid #d4d4d4;
  background: #fafafa;
  cursor: pointer;
}

.clear-filters {
  padding: 8px 14px;
  border-radius: 999px;
  border: 1px solid #d4d4d4;
  background: #f6f6f6;
  cursor: pointer;
  color: #555;
}

/* ---------------- CLEAR FILTERS (OUTSIDE) ---------------- */
.clear-filters {
  padding: 7px 12px;
  border: 1px solid #ccc;
  background: #fafafa;
  cursor: pointer;
  border-radius: 6px;
  color: #555;
}
.clear-filters:hover {
  background: #f0f0f0;
}

/* ---------------- FILTER DROPDOWN ---------------- */
.filters {
  position: absolute;
  top: 46px;
  right: 0;
  width: 260px;
  background: #fdfdfc;
  border: 1px solid #ddd;
  border-radius: 14px;
  box-shadow: 0 12px 30px rgba(0,0,0,0.08);
  padding: 6px 0;
  display: none;
}

.filters.show {
  display: block;
}

/* ---------------- FILTER ITEMS ---------------- */
.filter-item {
  padding: 10px 16px;
  font-size: 0.9em;
  color: #333;
  cursor: pointer;
  position: relative;
}

.filter-item:hover {
  background: #f1f1ee;
}

/* ---------------- SUBMENUS (OPEN LEFT) ---------------- */
.submenu {
  position: absolute;
  top: 0;
  right: 100%;
  background: #ffffff;
  border: 1px solid #ddd;
  border-radius: 8px;
  min-width: 200px;
  display: none;
  box-shadow: 0 8px 18px rgba(0,0,0,0.08);
  z-index: 1001;
}

.filter-item:hover > .submenu,
.has-submenu:hover > .submenu {
  display: block;
}

.has-submenu {
  position: relative;
  padding: 6px 10px;
}

/* ---------------- SUBMENU ITEMS ---------------- */
.filter-item:hover > .submenu,
.has-submenu:hover > .submenu {
  display: block;
}

.submenu div,
.submenu label {
  padding: 8px 14px;
  font-size: 0.85em;
  cursor: pointer;
}

.submenu div:hover,
.submenu label:hover {
  background: #f3f3f0;
}


  /* Enable tap-to-open submenus */
.has-submenu.open > .submenu {
  display: block;
}

/* ---------------- THEMES GRID ---------------- */
.theme-options {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 6px 12px;
  padding: 6px;
}

.theme-options label {
  display: flex;
  align-items: center;
  gap: 6px;
}

/* ---------------- CHECKBOX TIDY ---------------- */
.theme-options input {
  accent-color: #555;
}


  /* ---------------- MOBILE READABILITY + TAP TARGETS ---------------- */

/* Main filter items */
.filter-item {
  font-size: 1.05em;          /* bigger text */
  line-height: 1.4;
  padding: 14px 18px;         /* larger tap area */
}

/* Submenu items */
.submenu div,
.submenu label {
  font-size: 1em;
  padding: 14px 18px;         /* finger-friendly */
}

/* Theme labels */
.theme-options label {
  font-size: 0.95em;
}

/* Slightly larger checkbox for touch */
.theme-options input {
  transform: scale(1.2);
}

/* Prevent iOS zoom-on-focus */
input,
button {
  font-size: 16px;
}

</style>
</head>

<body>

<header>
  <h1>Poetry Archive</h1>
  <nav>
    <a href="index.html">Home</a>
    <a href="poems.html">Poems</a>
    <a href="about.html">About</a>
    <a href="contact.html">Contact</a>
  </nav>
</header>

<main>

<!-- SEARCH + FILTERS -->
<div class="search-and-filters">

  <div class="search-box">
    <input type="text" id="searchFilter" placeholder="Search poems…" class="search-bar">
    <button id="searchButton">Search</button>
  </div>

<div class="filter-panel">
  <button class="filter-toggle">Filters ▾</button>
  <button id="clearFilters" class="clear-filters">Clear</button>

  <div class="filters" id="filtersDropdown">

    <div class="filter-item">
      Sort by
      <div class="submenu">

        <div data-sort="author">Author’s Choice</div>

        <div class="has-submenu">
          Alphabetical
          <div class="submenu">
            <div data-sort="alpha">A → Z</div>
            <div data-sort="alpha-reverse">Z → A</div>
          </div>
        </div>

        <div class="has-submenu">
          Date
          <div class="submenu">
            <div data-sort="date-desc">Newest → Oldest</div>
            <div data-sort="date-asc">Oldest → Newest</div>
          </div>
        </div>

        <div class="has-submenu">
          Voice
          <div class="submenu">
            <div data-voice="all">All</div>
            <div data-voice="personal">Personal</div>
            <div data-voice="persona">Persona</div>
          </div>
        </div>

        <div class="has-submenu">
          Themes
          <div class="submenu">
            <div class="theme-options">
              <label><input type="checkbox" value="grief"> Grief</label>
              <label><input type="checkbox" value="loss"> Loss</label>
              <label><input type="checkbox" value="love"> Love</label>
              <label><input type="checkbox" value="memory"> Memory</label>
              <label><input type="checkbox" value="nostalgia"> Nostalgia</label>
              <label><input type="checkbox" value="heartbreak"> Heartbreak</label>
              <label><input type="checkbox" value="longing"> Longing</label>
            </div>
          </div>
        </div>

      </div>
    </div>

  </div>
</div>
</div>

<!-- POEMS -->
<section class="poem-section">
  <h2 class="collapsible">Poems</h2>
  <div class="poem-list">
    <ul>
      <li data-theme="grief loss memory nostalgia" data-date="2022-06-16" data-voice="persona">
        <a href="poems/untitled.html">Untitled</a> — 16/06/2022
      </li>
      <li data-theme="loss grief memory nostalgia parents" data-date="2025-07-15" data-voice="persona">
        <a href="poems/ghost.html">Ghost</a> — 15/07/2025
      </li>
      <li data-theme="love loss grief nostalgia emotional decay" data-date="2025-07-14" data-voice="persona">
        <a href="poems/expired.html">Expired</a> — 14/07/2025
      </li>
      <li data-theme="romantic longing love unsaid thoughts" data-date="2025-06-16" data-voice="personal">
        <a href="poems/yours.html">Yours</a> — 16/06/2025
      </li>
      <li data-theme="breakup heartbreak romantic decay toxic love" data-date="2025-06-14" data-voice="persona">
        <a href="poems/us.html">Us.</a> — 14/06/2025
      </li>
      <li data-theme="emotional distance love loss silence longing" data-date="2025-06-21" data-voice="personal">
        <a href="poems/silence.html">Silence</a> — 21/06/2025
      </li>
    </ul>
  </div>
</section>

<section class="poem-section">
  <h2 class="collapsible">Early Works</h2>
  <p><em>A few poems from when I first started writing — imperfect, but a part of my journey.</em></p>
  <div class="poem-list">
    <ul>
      <li data-theme="quiet heartbreak love loss unspoken pain" data-date="2022-07-04" data-voice="persona">
        <a href="poems/untitled2.html">Untitled.</a> — 04/07/2022
      </li>
      <li data-theme="quiet heartbreak love loss unspoken pain" data-date="2022-07-22" data-voice="persona">
        <a href="poems/untitled3.html">Untitled.</a> — 22/07/2022
      </li>
      <li data-theme="quiet heartbreak toxic love unspoken pain" data-date="2022-06-22" data-voice="persona">
        <a href="poems/untitled4.html">Untitled.</a> — 22/06/2022
      </li>
      <li data-theme="quiet heartbreak love loss second chances" data-date="2022-06-23" data-voice="persona">
        <a href="poems/anemptyslate.html">An Empty Slate.</a> — 23/06/2022
      </li>
      <li data-theme="quiet heartbreak love loss unspoken pain" data-date="2022-06-05" data-voice="persona">
        <a href="poems/untitled5.html">Untitled.</a> — 05/06/2022
      </li>
      <li data-theme="quiet heartbreak regret emotional betrayal" data-date="2022-08-29" data-voice="persona">
        <a href="poems/untitled6.html">Untitled.</a> — 29/08/2022
      </li>
      <li data-theme="quiet heartbreak love loss emotional despair" data-date="2022-07-09" data-voice="persona">
        <a href="poems/untitled7.html">Untitled.</a> — 09/07/2022
      </li>
    </ul>
  </div>
</section>

</main>

<footer>
  &copy; 2026 AlixGHF. All rights reserved.
</footer>

<script>
document.addEventListener("DOMContentLoaded", function () {

  document.querySelectorAll(".collapsible").forEach(header => {
    header.onclick = () => {
      header.classList.toggle("collapsed");
      header.parentElement.querySelector(".poem-list").classList.toggle("collapsed");
    };
  });

  const filterToggle = document.querySelector(".filter-toggle");
  const filtersDropdown = document.getElementById("filtersDropdown");

  filterToggle.onclick = () => {
    filtersDropdown.classList.toggle("show");
  };

  let sortValue = "author";
  let voiceValue = "all";
  let searchValue = "";

  const poemLists = document.querySelectorAll(".poem-list ul");
  const themeCheckboxes = document.querySelectorAll(".theme-options input");
  const searchInput = document.getElementById("searchFilter");
  const searchButton = document.getElementById("searchButton");
  const clearFilters = document.getElementById("clearFilters");

  const originalOrder = [...poemLists].map(ul => [...ul.children]);

  document.querySelectorAll("[data-sort]").forEach(el => {
    el.onclick = () => { sortValue = el.dataset.sort; applyFilters(); };
  });

  document.querySelectorAll("[data-voice]").forEach(el => {
    el.onclick = () => { voiceValue = el.dataset.voice; applyFilters(); };
  });

  searchButton.onclick = () => {
    searchValue = searchInput.value.toLowerCase();
    applyFilters();
  };

  themeCheckboxes.forEach(cb => cb.onchange = applyFilters);

  function applyFilters() {
    const selectedThemes = [...themeCheckboxes].filter(cb => cb.checked).map(cb => cb.value);

    poemLists.forEach((ul, index) => {
      let poems = [...ul.children];

      poems.forEach(li => {
        let visible = true;
        const themes = li.dataset.theme || "";

        if (voiceValue !== "all" && li.dataset.voice !== voiceValue) visible = false;
        if (searchValue && !li.textContent.toLowerCase().includes(searchValue)) visible = false;
        if (selectedThemes.length && !selectedThemes.some(t => themes.includes(t))) visible = false;

        li.style.display = visible ? "" : "none";
      });

      let visiblePoems = poems.filter(li => li.style.display !== "none");

      if (sortValue === "author") {
        ul.innerHTML = "";
        originalOrder[index].forEach(li => ul.appendChild(li));
        return;
      }

      if (sortValue === "alpha") visiblePoems.sort((a,b) => a.textContent.localeCompare(b.textContent));
      if (sortValue === "alpha-reverse") visiblePoems.sort((a,b) => b.textContent.localeCompare(a.textContent));
      if (sortValue === "date-desc") visiblePoems.sort((a,b) => new Date(b.dataset.date) - new Date(a.dataset.date));
      if (sortValue === "date-asc") visiblePoems.sort((a,b) => new Date(a.dataset.date) - new Date(b.dataset.date));

      visiblePoems.forEach(li => ul.appendChild(li));
    });
  }

  clearFilters.onclick = () => {
    sortValue = "author";
    voiceValue = "all";
    searchValue = "";
    searchInput.value = "";
    themeCheckboxes.forEach(cb => cb.checked = false);
    applyFilters();
  };


  /* iOS / touch support for hover menus */
document.querySelectorAll(".has-submenu").forEach(item => {
  item.addEventListener("click", e => {
    e.stopPropagation();

    // Close other open submenus
    document.querySelectorAll(".has-submenu").forEach(other => {
      if (other !== item) {
        other.classList.remove("open");
      }
    });

    // Toggle this one
    item.classList.toggle("open");
  });
});

// Close menus when tapping outside
document.addEventListener("click", () => {
  document.querySelectorAll(".has-submenu").forEach(item => {
    item.classList.remove("open");
  });
});


  /* Close filter dropdown when clicking outside */
document.addEventListener("click", function(e) {
  const filtersDropdown = document.getElementById("filtersDropdown");
  const filterToggle = document.querySelector(".filter-toggle");

  // If the click is NOT inside the filters dropdown or the toggle button, close it
  if (!filtersDropdown.contains(e.target) && !filterToggle.contains(e.target)) {
    filtersDropdown.classList.remove("show");
  }
});

});
</script>

</body>
</html>
